<div class="dashboard-container">
  <header class="dashboard-header">
    <h1>{{ title }}</h1>
  </header>

  <div class="dashboard-metrics">
    <div class="metric">
      <h2>Real Time</h2>
      <p>{{ lastestAverage() }} kg</p>
    </div>
    <div class="metric" [ngStyle]="{'color': getStdDevColor(this.stdDev)}">
      <h2>StdDev</h2>
      <p>{{ stdDev }} kg</p>
    </div>
  </div>

  <div class="divider"></div> <!-- Divider between sections -->

  <div class="dashboard-chart">
    <canvas baseChart class="canvas" style="display: block;"
            [data]="lineChartData"
            [options]="lineChartOptions"
            [type]="'line'">
    </canvas>
  </div>
  <div class="divider"></div> <!-- Divider between sections -->


  <div *ngIf="feedbackMessage && showDeleteLast" class="weight-estimate-container">
    <h2>Estimate Stored</h2>
    <p>{{ feedbackMessage }}</p>
    <button class="custom-button-red" [hidden]="!showDeleteLast" (click)="handleRevertClick()" style="margin: 10px">Revert</button>
    <button class="custom-button" (click)="resetFeedback()" style="margin: 10px">OK</button>
  </div>

  <div *ngIf="feedbackMessage && !showDeleteLast" class="weight-estimate-container">
    <h2>Estimate Deleted</h2>
    <p>{{ feedbackMessage }}</p>
    <button class="custom-button" (click)="resetFeedback()" style="margin: 10px">OK</button>
  </div>

  <div *ngIf="!feedbackMessage" class="weight-estimate-container">
    <h2>Real-Time Estimate</h2>
    <p *ngIf="realTimeEstimate && !isProcessing">
      Weight: {{ realTimeEstimate }} kg |
      <span [ngStyle]="{'color': getStdDevColor(lowestStdDev?.toString())}">StdDev: {{ lowestStdDev }} kg</span>
    </p>

    <div class="dashboard-actions">
      <div *ngIf="isProcessing || realTimeEstimate == null; else buttons">
        <div class="loading-spinner">
          <div class="leaf"></div>
        </div>
      </div>

      <ng-template #buttons>
        <button class="custom-button" (click)="handleResetClick()">Reset</button>
        <button class="custom-button" (click)="handleSubmitClick()">Submit</button>
      </ng-template>
    </div>
  </div>
</div>
